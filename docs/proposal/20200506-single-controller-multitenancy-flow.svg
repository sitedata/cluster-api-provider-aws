<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1085" height="1167" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:1085px;height:1167px" preserveAspectRatio="none" version="1.1" viewBox="0 0 1085 1167" zoomAndPan="magnify"><defs><filter id="f1i0j4gczrfn4w" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="534.75" cy="20" fill="#000" filter="url(#f1i0j4gczrfn4w)" rx="10" ry="10" style="stroke:none;stroke-width:1"/><rect style="stroke:#a80036;stroke-width:1.5" width="111" height="33.969" x="479.25" y="50" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="489.25" y="71.139" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91">AWS controller</text><rect style="stroke:#a80036;stroke-width:1.5" width="211" height="47.938" x="429.25" y="103.969" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="439.25" y="125.107" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="187">enqueue AWSCluster/Machine</text><text x="482.25" y="139.076" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105">for reconciliation</text><rect style="stroke:#a80036;stroke-width:1.5" width="127" height="33.969" x="471.25" y="171.906" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="481.25" y="193.045" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107">fetch AWSCluster</text><polygon fill="#FEFECE" points="436.25 225.875 633.25 225.875 645.25 237.875 633.25 249.875 436.25 249.875 424.25 237.875 436.25 225.875" filter="url(#f1i0j4gczrfn4w)" style="stroke:#a80036;stroke-width:1.5"/><text x="436.25" y="241.683" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197">AWSCluster has spec.identityRef?</text><text x="403.25" y="235.045" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="21">yes</text><text x="645.25" y="235.045" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="16">no</text><polygon fill="#FEFECE" points="137.5 259.875 368.5 259.875 380.5 271.875 368.5 283.875 137.5 283.875 125.5 271.875 137.5 259.875" filter="url(#f1i0j4gczrfn4w)" style="stroke:#a80036;stroke-width:1.5"/><text x="137.5" y="275.683" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="231">Referenced object is cluster scoped CRD</text><text x="104.5" y="269.045" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="21">yes</text><text x="380.5" y="269.045" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="16">no</text><rect style="stroke:#a80036;stroke-width:1.5" width="209" height="33.969" x="11" y="293.875" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="21" y="315.014" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="189">fetch cluster scoped resource</text><rect style="stroke:#a80036;stroke-width:1.5" width="204" height="47.938" x="288.5" y="293.875" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="298.5" y="315.014" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="180">fetch referenced resource in</text><text x="335" y="328.982" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111">same namespace</text><polygon fill="#FEFECE" points="253 347.813 265 359.813 253 371.813 241 359.813 253 347.813" filter="url(#f1i0j4gczrfn4w)" style="stroke:#a80036;stroke-width:1.5"/><rect style="stroke:#a80036;stroke-width:1.5" width="219" height="61.906" x="143.5" y="406.813" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="170" y="427.951" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="162">set or append referenced</text><text x="153.5" y="441.92" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="199">resource as OwnerReference to</text><text x="196" y="455.889" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="114">AWSCluster object</text><rect style="stroke:#a80036;stroke-width:1.5" width="180" height="47.938" x="163" y="537.703" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="173" y="558.842" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="156">construct new credential</text><text x="227.5" y="572.811" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="51">provider</text><rect style="stroke:#a80036;stroke-width:1.5" width="194" height="47.938" x="156" y="654.625" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="166" y="675.764" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="170">store credential provider in</text><text x="234" y="689.732" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="38">cache</text><polygon fill="#FEFECE" points="137.5 605.641 368.5 605.641 380.5 617.641 368.5 629.641 137.5 629.641 125.5 617.641 137.5 605.641" filter="url(#f1i0j4gczrfn4w)" style="stroke:#a80036;stroke-width:1.5"/><text x="257" y="640.779" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="16">no</text><text x="137.5" y="621.449" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="231">cache contains value for provider.Hash()</text><polygon fill="#FEFECE" points="253 722.563 265 734.563 253 746.563 241 734.563 253 722.563" filter="url(#f1i0j4gczrfn4w)" style="stroke:#a80036;stroke-width:1.5"/><rect style="stroke:#a80036;stroke-width:1.5" width="173" height="47.938" x="166.5" y="766.563" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="176.5" y="787.701" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149">fetch cached credential</text><text x="227.5" y="801.67" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="51">provider</text><polygon fill="#FEFECE" points="235.5 488.719 270.5 488.719 282.5 500.719 270.5 512.719 235.5 512.719 223.5 500.719 235.5 488.719" filter="url(#f1i0j4gczrfn4w)" style="stroke:#a80036;stroke-width:1.5"/><text x="257" y="523.857" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="16">no</text><text x="235.5" y="504.527" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35">error?</text><text x="282.5" y="497.889" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="21">yes</text><ellipse cx="325.5" cy="500.719" fill="#FFF" filter="url(#f1i0j4gczrfn4w)" rx="11" ry="11" style="stroke:#000;stroke-width:1"/><ellipse cx="325.5" cy="500.719" fill="#000" rx="6" ry="6" style="stroke:#7f7f7f;stroke-width:1"/><rect style="stroke:#a80036;stroke-width:1.5" width="205" height="47.938" x="714" y="259.875" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="730.5" y="281.014" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="172">default spec.identityRef to</text><text x="724" y="294.982" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="185">AWSClusterControllerIdentity</text><polygon fill="#FEFECE" points="648.5 342.813 984.5 342.813 996.5 354.813 984.5 366.813 648.5 366.813 636.5 354.813 648.5 342.813" filter="url(#f1i0j4gczrfn4w)" style="stroke:#a80036;stroke-width:1.5"/><text x="648.5" y="358.621" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="336">AWSCluster namespace matches with allowedNamespaces</text><text x="615.5" y="351.982" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="21">yes</text><text x="996.5" y="351.982" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="16">no</text><rect style="stroke:#a80036;stroke-width:1.5" width="188" height="47.938" x="532.5" y="376.813" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="542.5" y="397.951" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="164">use controller&apos;s credential</text><text x="597.5" y="411.92" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58">providers</text><rect style="stroke:#a80036;stroke-width:1.5" width="123" height="33.969" x="945" y="376.813" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="955" y="397.951" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103">return with error</text><ellipse cx="1006.5" cy="456.781" fill="#FFF" filter="url(#f1i0j4gczrfn4w)" rx="11" ry="11" style="stroke:#000;stroke-width:1"/><ellipse cx="1006.5" cy="456.781" fill="#000" rx="6" ry="6" style="stroke:#7f7f7f;stroke-width:1"/><polygon fill="#FEFECE" points="534.75 824.5 546.75 836.5 534.75 848.5 522.75 836.5 534.75 824.5" filter="url(#f1i0j4gczrfn4w)" style="stroke:#a80036;stroke-width:1.5"/><rect style="stroke:#a80036;stroke-width:1.5" width="212" height="117.781" x="428.75" y="868.5" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="448.25" y="889.639" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="173">call STS::GetCallerIdentity():</text><text x="439.25" y="903.607" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="187">if (awscluster.AccountID != nil</text><text x="444.25" y="917.576" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="177">&amp;&amp; awscluster.AccountID !=</text><text x="438.75" y="931.545" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192">GetCallerIdentity?) then (error)</text><text x="524.75" y="945.514" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28">stop</text><text x="519.25" y="959.482" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="31">endif</text><text x="441.25" y="973.451" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="187">:update awscluster.accountID</text><rect style="stroke:#a80036;stroke-width:1.5" width="183" height="33.969" x="443.25" y="1006.281" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="453.25" y="1027.42" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="163">create new service clients</text><rect style="stroke:#a80036;stroke-width:1.5" width="173" height="47.938" x="448.25" y="1060.25" fill="#FEFECE" filter="url(#f1i0j4gczrfn4w)" rx="12.5" ry="12.5"/><text x="458.25" y="1081.389" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149">reconcile AWSCluster or</text><text x="495.25" y="1095.357" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79">AWSMachine</text><ellipse cx="534.75" cy="1139.188" fill="#FFF" filter="url(#f1i0j4gczrfn4w)" rx="11" ry="11" style="stroke:#000;stroke-width:1"/><ellipse cx="534.75" cy="1139.188" fill="#000" rx="6" ry="6" style="stroke:#7f7f7f;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="534.75" x2="534.75" y1="30" y2="50"/><polygon fill="#666" points="530.75 40 534.75 50 538.75 40 534.75 44" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="534.75" x2="534.75" y1="83.969" y2="103.969"/><polygon fill="#666" points="530.75 93.969 534.75 103.969 538.75 93.969 534.75 97.969" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="534.75" x2="534.75" y1="151.906" y2="171.906"/><polygon fill="#666" points="530.75 161.906 534.75 171.906 538.75 161.906 534.75 165.906" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="125.5" x2="115.5" y1="271.875" y2="271.875"/><line style="stroke:#666;stroke-width:1.5" x1="115.5" x2="115.5" y1="271.875" y2="293.875"/><polygon fill="#666" points="111.5 283.875 115.5 293.875 119.5 283.875 115.5 287.875" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="380.5" x2="390.5" y1="271.875" y2="271.875"/><line style="stroke:#666;stroke-width:1.5" x1="390.5" x2="390.5" y1="271.875" y2="293.875"/><polygon fill="#666" points="386.5 283.875 390.5 293.875 394.5 283.875 390.5 287.875" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="115.5" x2="115.5" y1="327.844" y2="359.813"/><line style="stroke:#666;stroke-width:1.5" x1="115.5" x2="241" y1="359.813" y2="359.813"/><polygon fill="#666" points="231 355.813 241 359.813 231 363.813 235 359.813" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="390.5" x2="390.5" y1="341.813" y2="359.813"/><line style="stroke:#666;stroke-width:1.5" x1="390.5" x2="265" y1="359.813" y2="359.813"/><polygon fill="#666" points="275 355.813 265 359.813 275 363.813 271 359.813" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="253" x2="253" y1="371.813" y2="406.813"/><polygon fill="#666" points="249 396.813 253 406.813 257 396.813 253 400.813" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="253" x2="253" y1="629.641" y2="654.625"/><polygon fill="#666" points="249 644.625 253 654.625 257 644.625 253 648.625" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="380.5" x2="392.5" y1="617.641" y2="617.641"/><polygon fill="#666" points="388.5 668.594 392.5 678.594 396.5 668.594 392.5 672.594" style="stroke:#666;stroke-width:1.5"/><line style="stroke:#666;stroke-width:1.5" x1="392.5" x2="392.5" y1="617.641" y2="734.563"/><line style="stroke:#666;stroke-width:1.5" x1="392.5" x2="265" y1="734.563" y2="734.563"/><polygon fill="#666" points="275 730.563 265 734.563 275 738.563 271 734.563" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="253" x2="253" y1="702.563" y2="722.563"/><polygon fill="#666" points="249 712.563 253 722.563 257 712.563 253 716.563" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="253" x2="253" y1="585.641" y2="605.641"/><polygon fill="#666" points="249 595.641 253 605.641 257 595.641 253 599.641" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="253" x2="253" y1="746.563" y2="766.563"/><polygon fill="#666" points="249 756.563 253 766.563 257 756.563 253 760.563" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="253" x2="253" y1="512.719" y2="537.703"/><polygon fill="#666" points="249 527.703 253 537.703 257 527.703 253 531.703" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="282.5" x2="314.5" y1="500.719" y2="500.719"/><polygon fill="#666" points="304.5 496.719 314.5 500.719 304.5 504.719 308.5 500.719" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="253" x2="253" y1="814.5" y2="836.5"/><line style="stroke:#666;stroke-width:1.5" x1="253" x2="522.75" y1="836.5" y2="836.5"/><polygon fill="#666" points="512.75 832.5 522.75 836.5 512.75 840.5 516.75 836.5" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="253" x2="253" y1="468.719" y2="488.719"/><polygon fill="#666" points="249 478.719 253 488.719 257 478.719 253 482.719" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="1006.5" x2="1006.5" y1="410.781" y2="445.781"/><polygon fill="#666" points="1002.5 435.781 1006.5 445.781 1010.5 435.781 1006.5 439.781" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="636.5" x2="626.5" y1="354.813" y2="354.813"/><line style="stroke:#666;stroke-width:1.5" x1="626.5" x2="626.5" y1="354.813" y2="376.813"/><polygon fill="#666" points="622.5 366.813 626.5 376.813 630.5 366.813 626.5 370.813" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="996.5" x2="1006.5" y1="354.813" y2="354.813"/><line style="stroke:#666;stroke-width:1.5" x1="1006.5" x2="1006.5" y1="354.813" y2="376.813"/><polygon fill="#666" points="1002.5 366.813 1006.5 376.813 1010.5 366.813 1006.5 370.813" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="626.5" x2="626.5" y1="424.75" y2="836.5"/><line style="stroke:#666;stroke-width:1.5" x1="626.5" x2="546.75" y1="836.5" y2="836.5"/><polygon fill="#666" points="556.75 832.5 546.75 836.5 556.75 840.5 552.75 836.5" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="816.5" x2="816.5" y1="307.813" y2="342.813"/><polygon fill="#666" points="812.5 332.813 816.5 342.813 820.5 332.813 816.5 336.813" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="424.25" x2="253" y1="237.875" y2="237.875"/><line style="stroke:#666;stroke-width:1.5" x1="253" x2="253" y1="237.875" y2="259.875"/><polygon fill="#666" points="249 249.875 253 259.875 257 249.875 253 253.875" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="645.25" x2="816.5" y1="237.875" y2="237.875"/><line style="stroke:#666;stroke-width:1.5" x1="816.5" x2="816.5" y1="237.875" y2="259.875"/><polygon fill="#666" points="812.5 249.875 816.5 259.875 820.5 249.875 816.5 253.875" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="534.75" x2="534.75" y1="205.875" y2="225.875"/><polygon fill="#666" points="530.75 215.875 534.75 225.875 538.75 215.875 534.75 219.875" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="534.75" x2="534.75" y1="848.5" y2="868.5"/><polygon fill="#666" points="530.75 858.5 534.75 868.5 538.75 858.5 534.75 862.5" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="534.75" x2="534.75" y1="986.281" y2="1006.281"/><polygon fill="#666" points="530.75 996.281 534.75 1006.281 538.75 996.281 534.75 1000.281" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="534.75" x2="534.75" y1="1040.25" y2="1060.25"/><polygon fill="#666" points="530.75 1050.25 534.75 1060.25 538.75 1050.25 534.75 1054.25" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="534.75" x2="534.75" y1="1108.188" y2="1128.188"/><polygon fill="#666" points="530.75 1118.188 534.75 1128.188 538.75 1118.188 534.75 1122.188" style="stroke:#666;stroke-width:1"/></g></svg>